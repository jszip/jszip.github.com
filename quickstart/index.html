<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Dec 4, 2012
 | Rendered using Apache Maven Fluido Skin 1.3.1-SNAPSHOT
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20121204" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JSZip - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1-SNAPSHOT.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1-SNAPSHOT.min.js"></script>

    
              <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-25185795-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="http://github.com/jszip/jszip-parent">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Main <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../index.html"  title="Welcome">Welcome</a>
</li>
                  
                      <li>      <a href="../quickstart/index.html"  title="Quickstart">Quickstart</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Repackaged Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../redist/"  title="About Repackaged Modules">About Repackaged Modules</a>
</li>
                  
                      <li>      <a href="../redist/jquery/"  title="jQuery">jQuery</a>
</li>
                  
                      <li>      <a href="../redist/json2/"  title="json2">json2</a>
</li>
                  
                      <li>      <a href="../redist/knockout/"  title="Knockout">Knockout</a>
</li>
                  
                      <li>      <a href="../redist/require/"  title="RequireJS">RequireJS</a>
</li>
                  
                      <li>      <a href="../redist/require-text-plugin/"  title="RequireJS/AMD Text plugin">RequireJS/AMD Text plugin</a>
</li>
                  
                      <li>      <a href="../redist/require-i18n-plugin/"  title="RequireJS/AMD I18N plugin">RequireJS/AMD I18N plugin</a>
</li>
                  
                      <li>      <a href="../redist/require-domready-plugin/"  title="RequireJS/AMD domReady plugin">RequireJS/AMD domReady plugin</a>
</li>
                  
                      <li>      <a href="../redist/require-step-plugin/"  title="RequireJS/AMD step plugin">RequireJS/AMD step plugin</a>
</li>
                  
                      <li>      <a href="../redist/underscore/"  title="Underscore.js">Underscore.js</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Sub-projects <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../jszip-maven-plugin"  title="Maven Plugin">Maven Plugin</a>
</li>
                  
                      <li>      <a href="../jszip-parent"  title="jszip.org parent">jszip.org parent</a>
</li>
                          </ul>
      </li>
                      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="../project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../index.html"  title="About">About</a>
</li>
                                  <li>      <a href="../team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="../dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="../plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="../integration.html"  title="Continuous Integration">Continuous Integration</a>
</li>
                                  <li>      <a href="../issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="../source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                                  <li>      <a href="../license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="../plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="../distribution-management.html"  title="Distribution Management">Distribution Management</a>
</li>
                                  <li>      <a href="../project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                                  <li>      <a href="../mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="../dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="../project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../dependency-updates-report.html"  title="Dependency Updates Report">Dependency Updates Report</a>
</li>
                                  <li>      <a href="../plugin-updates-report.html"  title="Plugin Updates Report">Plugin Updates Report</a>
</li>
                                  <li>      <a href="../property-updates-report.html"  title="Property Updates Report">Property Updates Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
                                                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                                                                                                <img src="../images/jszip-logo.png"  alt="jszip.org Site"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href=".././" title="JSZip">
        JSZip</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2012-12-04</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: current</li>
            
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <!-- Copyright 2011-2012 Stephen Connolly.

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. --><h1>Quickstart</h1><p>Before we begin, lets check you have the right versions of Java and Maven.</p><p>Make sure that Java is at least <tt>1.5</tt></p>
<div class="source"><pre class="prettyprint linenums">$ java -version
java version &quot;1.7.0_07&quot;
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) 64-Bit Server VM (build 23.3-b01, mixed mode)
</pre></div><p>Maven sure that Maven is at least <tt>3.0.4</tt></p>
<div class="source"><pre class="prettyprint linenums">$ mvn -version
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
...
</pre></div><div class="section"><h2>Lazy?<a name="Lazy"></a></h2><p>The source code from this example is available on <a class="externalLink" href="https://github.com/jszip/quickstart-basic">Github</a></p></div><div class="section"><h2>Create a root module<a name="Create_a_root_module"></a></h2><p>Use your favourite editor to create a file called <tt>pom.xml</tt> in a new directory that will hold this project. The file should look like this:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;localhost&lt;/groupId&gt;
  &lt;artifactId&gt;quickstart-parent&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;pom&lt;/packaging&gt;

  &lt;prerequisites&gt;
    &lt;maven&gt;3.0.4&lt;/maven&gt;
  &lt;/prerequisites&gt;

  &lt;modules&gt;
    &lt;module&gt;server&lt;/module&gt;
    &lt;module&gt;client&lt;/module&gt;
    &lt;module&gt;webapp&lt;/module&gt;
  &lt;/modules&gt;

  &lt;properties&gt;
    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
    &lt;project.build.outputEncoding&gt;UTF-8&lt;/project.build.outputEncoding&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
  &lt;/properties&gt;

  &lt;build&gt;
    &lt;pluginManagement&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.5.1&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.12.4&lt;/version&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.3&lt;/version&gt;
        &lt;/plugin&gt;
      &lt;/plugins&gt;
    &lt;/pluginManagement&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.jszip.maven&lt;/groupId&gt;
        &lt;artifactId&gt;jszip-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;0.1-alpha-5&lt;/version&gt;
        &lt;extensions&gt;true&lt;/extensions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;

&lt;/project&gt;
</pre></div></div><div class="section"><h2>Server side Java code module<a name="Server_side_Java_code_module"></a></h2><p>Make the directory structure for the <tt>server</tt> module. This module will hold the Java based server-side code.</p>
<div class="source"><pre class="prettyprint linenums">$ mkdir -p server/src/{main,test}/{java,resources}
</pre></div><p>Create the <tt>server/pom.xml</tt> in your favourite editor. It should look like this:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;parent&gt;
    &lt;groupId&gt;localhost&lt;/groupId&gt;
    &lt;artifactId&gt;quickstart-parent&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;/parent&gt;
  &lt;artifactId&gt;quickstart-server&lt;/artifactId&gt;

  &lt;dependencies&gt;
    &lt;!-- Using Servlet API, but provided by the container --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
      &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
      &lt;version&gt;2.5&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- Use SLF4J and Logback as the runtime implementation --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
      &lt;version&gt;1.7.2&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
      &lt;version&gt;1.7.2&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j-over-slf4j&lt;/artifactId&gt;
      &lt;version&gt;1.7.2&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
      &lt;version&gt;1.0.7&lt;/version&gt;
      &lt;scope&gt;runtime&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- Use Jersey with Jackson for REST API --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-core&lt;/artifactId&gt;
      &lt;version&gt;1.11&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;
      &lt;version&gt;1.11&lt;/version&gt;
      &lt;exclusions&gt;
        &lt;!-- exclude the old version of jackson at the old coordinates --&gt;
        &lt;exclusion&gt;
          &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
          &lt;artifactId&gt;jackson-core-asl&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
          &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
          &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
          &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
          &lt;artifactId&gt;jackson-jaxrs&lt;/artifactId&gt;
        &lt;/exclusion&gt;
        &lt;exclusion&gt;
          &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
          &lt;artifactId&gt;jackson-xc&lt;/artifactId&gt;
        &lt;/exclusion&gt;
      &lt;/exclusions&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;
      &lt;version&gt;1.11&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;
      &lt;version&gt;1.11&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;
      &lt;artifactId&gt;jersey-servlet&lt;/artifactId&gt;
      &lt;version&gt;1.11&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;
      &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;
      &lt;version&gt;2.0.5&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- for testing --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;4.11&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

&lt;/project&gt;
</pre></div><p>You dont have to use the server side components listed above, but in our experience these ones are really good.</p><p>We will create the Jersey REST interface. Create the file <tt>server/src/main/java/localhost/quickstart/Greeter.java</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">package localhost.quickstart;

import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import java.util.ArrayList;
import java.util.List;

@Path(&quot;/greeter&quot;)
public class Greeter {
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;String&gt; greet(List&lt;String&gt; people) {
        List&lt;String&gt; response = new ArrayList&lt;String&gt;(people.size());
        for (String person : people) {
            response.add(&quot;Hello &quot; + person);
        }
        return response;
    }
}
</pre></div><p>Create the file <tt>server/src/main/java/localhost/quickstart/Api.java</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">package localhost.quickstart;

import com.sun.jersey.api.core.PackagesResourceConfig;

public class Api extends PackagesResourceConfig {
    public Api() {
        super(Api.class.getPackage().getName());
    }
}
</pre></div><p>While we are at it, lets create a unit test <tt>server/src/test/java/localhost/quickstart/GreeterTest.java</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">package localhost.quickstart;

import org.junit.*;

import java.util.Arrays;
import java.util.Collections;

import static org.hamcrest.CoreMatchers.*;
import static org.junit.Assert.*;

public class GreeterTest {
    @Test
    public void whenNobodyToGreetThenGreetNobody() throws Exception {
        Greeter instance = new Greeter();
        assertThat(instance.greet(Collections.&lt;String&gt;emptyList()),
                is(Collections.&lt;String&gt;emptyList()));
    }

    @Test
    public void whenSomebodyToGreetThenGreetThem() throws Exception {
        Greeter instance = new Greeter();
        assertThat(instance.greet(Collections.singletonList(&quot;Harry&quot;)),
                is(Collections.&lt;String&gt;singletonList(&quot;Hello Harry&quot;)));
    }

    @Test
    public void whenPeopleToGreetThenGreetEachOfThem() throws Exception {
        Greeter instance = new Greeter();
        assertThat(instance.greet(Arrays.asList(&quot;Harry&quot;,&quot;Sally&quot;)),
                hasItems(&quot;Hello Harry&quot;, &quot;Hello Sally&quot;));
    }
}
</pre></div></div><div class="section"><h2>Client side JavaScript module<a name="Client_side_JavaScript_module"></a></h2><p>Make the directory structure for the <tt>client</tt> module. This module will hold the JavaScript code that will execute on the users browser.</p>
<div class="source"><pre class="prettyprint linenums">$ mkdir -p client/src/{main,test}/{js,resources}
</pre></div><p>Create the <tt>client/pom.xml</tt> in your favourite editor. It should look like this:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;parent&gt;
    &lt;groupId&gt;localhost&lt;/groupId&gt;
    &lt;artifactId&gt;quickstart-parent&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;/parent&gt;
  &lt;artifactId&gt;quickstart-client&lt;/artifactId&gt;
  &lt;packaging&gt;jszip&lt;/packaging&gt;

&lt;/project&gt;
</pre></div><p>We will add the code that calls back to our server side API.</p><p>Create the file <tt>client/src/main/js/scripts/main.js</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">var postRequest = new XMLHttpRequest();
postRequest.onreadystatechange = function () {
    if (postRequest.readyState == 4) {
        if (postRequest.status == 200) {
            document.getElementById(&quot;result&quot;).textContent = postRequest.responseText;
        } else {
            document.getElementById(&quot;result&quot;).textContent = &quot;An error has occurred&quot;;
        }
    }
};
postRequest.open(&quot;POST&quot;, &quot;api/greeter&quot;, true);
postRequest.setRequestHeader(&quot;Content-type&quot;, &quot;application/json&quot;);
postRequest.send('[&quot;Sally&quot;,&quot;Harry&quot;,&quot;Fred&quot;]');
</pre></div><p>Its not pretty, its not HTML5, but its just there to show you how this all hangs together.</p><p>While we are at it, lets create an associated resource &#x201c;used by&#x201d; this JavaScript code. Create the file <tt>client/src/main/resources/stylesheets/main.css</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">pre {
    background-color: #eee;
}
</pre></div></div><div class="section"><h2>The web application module<a name="The_web_application_module"></a></h2><p>Make the directory structure for the <tt>webapp</tt> module. This module will hold the web application descriptor and the static web assets.</p>
<div class="source"><pre class="prettyprint linenums">$ mkdir -p webapp/src/main/webapp/WEB-INF
$ mkdir -p webapp/src/build/js
</pre></div><p>Create the <tt>webapp/pom.xml</tt> in your favourite editor. It shold look like this:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;parent&gt;
    &lt;groupId&gt;localhost&lt;/groupId&gt;
    &lt;artifactId&gt;quickstart-parent&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;/parent&gt;
  &lt;artifactId&gt;quickstart-webapp&lt;/artifactId&gt;
  &lt;packaging&gt;war&lt;/packaging&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;localhost&lt;/groupId&gt;
      &lt;artifactId&gt;quickstart-server&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;localhost&lt;/groupId&gt;
      &lt;artifactId&gt;quickstart-client&lt;/artifactId&gt;
      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
      &lt;type&gt;jszip&lt;/type&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.jszip.maven&lt;/groupId&gt;
        &lt;artifactId&gt;jszip-maven-plugin&lt;/artifactId&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;unpack&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;

  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;release&lt;/id&gt;
      &lt;build&gt;
        &lt;plugins&gt;
          &lt;plugin&gt;
            &lt;groupId&gt;org.jszip.maven&lt;/groupId&gt;
            &lt;artifactId&gt;jszip-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
              &lt;execution&gt;
                &lt;goals&gt;
                  &lt;goal&gt;optimize&lt;/goal&gt;
                &lt;/goals&gt;
              &lt;/execution&gt;
            &lt;/executions&gt;
          &lt;/plugin&gt;
        &lt;/plugins&gt;
      &lt;/build&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;

&lt;/project&gt;
</pre></div><p>We will give the <a class="externalLink" href="https://github.com/jrburke/r.js/">r.js</a> optimizer profile configuration by creating the file <tt>webapp/src/build/js/profile.js</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">({
    baseUrl:&quot;scripts&quot;,
    optimize: &quot;closure&quot;,
    optimizeCss: &quot;standard&quot;,
    modules:[
        {
            name:&quot;main&quot;
        }
    ]
})
</pre></div><p>We will add a <tt>webapp/src/main/webapp/WEB-INF/web.xml</tt> application descriptor with the following content:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
         version=&quot;2.5&quot;&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;
    &lt;servlet-class&gt;com.sun.jersey.spi.container.servlet.ServletContainer&lt;/servlet-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;
      &lt;param-value&gt;localhost.quickstart.Api&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/api/*&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</pre></div><p>To add the Jersey servlet for us.</p><p>And finally we will create a HTML page to hold our &#x201c;application&#x201d;. Create the file <tt>webapp/src/main/webapp/index.html</tt> with the following content:</p>
<div class="source"><pre class="prettyprint linenums">&lt;html&gt;
&lt;head&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;stylesheets/main.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;
    Here is the response:
&lt;/p&gt;
&lt;pre id=&quot;result&quot;&gt;
    ...
&lt;/pre&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;scripts/main.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div><p><i>Note:</i> we could have just as easily put the HTML page in the client modules resources, i.e. at <tt>client/src/main/resources/index.html</tt></p></div><div class="section"><h2>Start it up<a name="Start_it_up"></a></h2><p>Here is what your file structure should be at this point:</p>
<div class="source"><pre class="prettyprint linenums">pom.xml
client/pom.xml
client/src/main/js/scripts/main.js
client/src/main/resources/stylesheets/main.css
server/pom.xml
server/src/main/java/localhost/quickstart/Api.java
server/src/main/java/localhost/quickstart/Greeter.java
server/src/test/java/localhost/quickstart/GreeterTest.java
webapp/pom.xml
webapp/src/build/js/profile.js
webapp/src/main/webapp/index.html
webapp/src/main/webapp/WEB-INF/web.xml
</pre></div><p>Were going to start it up at the in live development mode. We dont know the state of the tests, so were not going to bother with running them, we just want to be able to play with the files.</p>
<div class="source"><pre class="prettyprint linenums">$ mvn compile jszip:run
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] quickstart-parent
[INFO] quickstart-server
[INFO] quickstart-client
[INFO] quickstart-webapp
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building quickstart-parent 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
</pre></div><p> (skip some of the logs) </p>
<div class="source"><pre class="prettyprint linenums">[INFO] --- jszip-maven-plugin:0.1-alpha-5:run (default-cli) @ quickstart-webapp ---
[INFO] Starting JSZip run: module localhost:quickstart-webapp
Nov 28, 2012 11:43:55 AM org.eclipse.jetty.server.Server doStart
</pre></div><p> (skip some of the logs) </p>
<div class="source"><pre class="prettyprint linenums">Nov 28, 2012 11:43:55 AM com.sun.jersey.server.impl.application.DeferredResourceConfig$ApplicationHolder &lt;init&gt;
INFO: Instantiated the Application class localhost.quickstart.Api
[INFO] Context started. Will restart if changes to poms detected.
</pre></div><p>We can now point a browser at <a class="externalLink" href="http://localhost:8080/">http://localhost:8080/</a> and see our application.</p><p><img src="../images/quickstart-ss1.png" alt="The resulting application" /></p><div class="section"><h3>Live development<a name="Live_development"></a></h3><p>At this point we will assume you are using a Java IDE.</p><p>Leave Maven running. Leave your browser window open.</p><p>Edit the <tt>server/src/main/java/localhost/quickstart/Greeter.java</tt> file in your IDE and change the line</p>
<div class="source"><pre class="prettyprint linenums">            response.add(&quot;Hello &quot; + person);
</pre></div><p>to</p>
<div class="source"><pre class="prettyprint linenums">            response.add(&quot;Hi there, &quot; + person + &quot;!&quot;);
</pre></div><p>Ask your IDE to compile the code (if it doesnt auto-recompile for you). Wait a couple of seconds for JSZip to decide that the <tt>.class</tt> files have stopped changing and are stable enough to reload the classpath, and just hit reload in your browser.</p><p><img src="../images/quickstart-ss2.png" alt="Changes picked up live" /></p><p>Here is what you need to know about the live development mode:</p>
<ol style="list-style-type: decimal">
  <li>Changes to the <tt>&lt;packaging&gt;jszip&lt;/packaging&gt;</tt> module content (i.e. <tt>.js</tt> files and associated content) are  reflected instantly.</li>
  <li>Changes to the <tt>.class</tt> files are subject to a quiet period delay. In practical terms this means count to ten  then hit reload.</li>
  <li>Changes to the <tt>pom.xml</tt> files are subject to a quiet period delay. In practical terms this means count to five,  check the shell window to see that the JSZip plugin was able to apply the change, then hit reload. (Some changes  to the <tt>pom.xml</tt> cannot be reflected in live development mode as they affect the sequence of the reactor, with  the result that the reactor has to be restarted)</li>
  <li>If the lifecycle is advanced to the <tt>package</tt> phase or beyond, then you will no longer be in &#x201c;Live development&#x201d;  mode as the reactor will have replaced the attached directories with the built <tt>.zip</tt> and <tt>.jar</tt> files. If you can  convince your IDE or a second Maven instance to rebuild those files though, then the changes will be picked up live.</li>
</ol></div><div class="section"><h3>Making the optimized release build<a name="Making_the_optimized_release_build"></a></h3><p>To make the release build we just build with the <tt>release</tt> profile active.</p>
<div class="source"><pre class="prettyprint linenums">$ mvn -Prelease clean package
</pre></div><p>If we then take a look at the JavaScript file that is bundled within the web application, we will see that it is now a minified versions:</p>
<div class="source"><pre class="prettyprint linenums">$ unzip -p webapp/target/quickstart-webapp-1.0-SNAPSHOT.war scripts/*
var postRequest=new XMLHttpRequest;postRequest.onreadystatechange=function(){4=
=postRequest.readyState&amp;&amp;(200==postRequest.status?document.getElementById(&quot;resu
lt&quot;).textContent=postRequest.responseText:document.getElementById(&quot;result&quot;).tex
tContent=&quot;An error has occurred&quot;)};postRequest.open(&quot;POST&quot;,&quot;api/greeter&quot;,!0);po
stRequest.setRequestHeader(&quot;Content-type&quot;,&quot;application/json&quot;);postRequest.send(
'[&quot;Sally&quot;,&quot;Harry&quot;,&quot;Fred&quot;]');define(&quot;main&quot;,function(){});
</pre></div><p>And the CSS file has been minified also:</p>
<div class="source"><pre class="prettyprint linenums">$ unzip -p webapp/target/quickstart-webapp-1.0-SNAPSHOT.war stylesheets/*
pre {background-color: #eee;}
</pre></div><p><i>Note:</i> The default configuration of the <a class="externalLink" href="http://maven.apache.org/plugins/maven-release-plugin/">Maven Release Plugin</a> will activate the profile called <tt>release</tt> by default.</p><p><i>Note:</i> if you are publishing your web application to <a class="externalLink" href="http://repo1.maven.org/maven2/">Central</a> and using <a class="externalLink" href="http://repo1.maven.org/maven2/org/sonatype/oss/oss-parent/7/oss-parent-7.pom">the Sonatype parent pom</a> that changes the name of the profile activated to <tt>sonatype-oss-release</tt> so you would need to bind the <tt>optimize</tt> goal in a profile with <tt>&lt;id&gt;sonatype-oss-release&lt;/id&gt;</tt> as opposed to <tt>&lt;id&gt;release&lt;/id&gt;</tt> that we have used here.</p></div></div><div class="section"><h2>The next steps<a name="The_next_steps"></a></h2><p>The next steps are to use an AMD module loader to modularize your JavaScript code. Then you can start putting each module into its own module and define inter-module dependencies. Maven will take care of pulling in the required dependencies for you. For example a <tt>backbone.js</tt> module could depend on <tt>jquery</tt> and <tt>underscore</tt> so that you dont need to write those dependencies yourself.</p></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                   2012.
          All Rights Reserved.      
                    
      </div>

        
                <p id="poweredBy" class="pull-right">
                                                                                                                      <a href="http://maven.apache.org/" title="Built by Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="../jszip-parent/images/logos/maven-feather.png"    />
      </a>
                                                                                                          <a href="https://jszip.ci.cloudbees.com/" title="Built on CloudBees" class="builtBy">
        <img class="builtBy"  alt="Built on CloudBees" src="../images/built-on-cloudbees.png"    />
      </a>
                  </p>
        
                </div>
    </footer>
  </body>
</html>
